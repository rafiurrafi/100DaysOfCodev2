<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="stylesheet" href="style.css" />
    <title>Practise basic components of website</title>
  </head>
  <body></body>
  <script>
    let block;
    let listContainer;
    let list = [];
    const movementArray = ["top", "bottom", "right", "left"];
    document.addEventListener("DOMContentLoaded", function () {
      block = document.createElement("div");
      block.innerText = "Hello World";
      block.style.height = "100px";
      block.style.width = "100px";
      block.style.backgroundColor = genRandomColor();
      block.style.color = "white";
      block.style.position = "absolute";
      block.style.lineHeight = "100px";
      block.style.textAlign = "center";
      block.style.top = "100px";
      block.style.left = "100px";
      document.body.appendChild(block);
      listContainer = document.createElement("div");
      document.body.appendChild(listContainer);
    });
    document.addEventListener("keydown", (e) => {
      e.preventDefault();
      if (e.keyCode === 37) addItem("left");
      if (e.keyCode === 38) addItem("top");
      if (e.keyCode === 39) addItem("right");
      if (e.keyCode === 40) addItem("bottom");
      if (e.keyCode === 67) block.style.backgroundColor = genRandomColor();
      if (e.keyCode === 13 || e.keyCode === 32) mover();
      if (e.keyCode === 82) addRandomMove();
    });
    function mover() {
      const current = block.getBoundingClientRect();
      const el = list.shift();
      const text = el.textContent.replace("+", "");
      listContainer.removeChild(el);
      block.textContent = "move : " + text;
      if (text === "left")
        block.style.left = current.left - current.width + "px";
      if (text === "right")
        block.style.left = current.left + current.width + "px";
      if (text === "top") block.style.top = current.top - current.height + "px";
      if (text === "bottom")
        block.style.top = current.top + current.height + "px";
      // setTimeout(() => {
      //   mover;
      // }, 300);
    }
    function addRandomMove() {
      const temp = movementArray(
        Math.floor(Math.random() * movementArray.length)
      );
      addItem(temp);
    }
    function goLeft() {
      let temp = block.offsetLeft;
      temp -= 50;
      block.style.left = temp + "px";
    }
    function goRight() {
      let temp = block.offsetLeft;
      temp += 50;
      block.style.left = temp + "px";
    }
    function goTop() {
      let temp = block.offsetTop;
      temp -= 50;
      block.style.top = temp + "px";
    }
    function goBottom() {
      let temp = block.offsetTop;
      temp += 50;
      block.style.top = temp + "px";
    }
    function genRandomColor() {
      return "#" + Math.random().toString(16).substr(-6);
    }
    function addItem(item) {
      const span = document.createElement("span");
      span.textContent = "+" + item;
      span.style.border = "1px solid red";
      span.style.padding = "10px";
      span.addEventListener("mouseover", function () {
        this.style.backgroundColor = "red";
        this.style.color = "white";
      });
      span.addEventListener("mouseout", function () {
        this.style.backgroundColor = "white";
        this.style.color = "black";
      });
      span.addEventListener("click", function () {
        const currentIndex = list.indexOf(this);
        let remove = list.splice(currentIndex, 1);
        listContainer.removeChild(this);
      });
      list.push(span);
      listContainer.appendChild(span);
    }
  </script>
</html>
