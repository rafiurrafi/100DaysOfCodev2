<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="stylesheet" href="style.css" />
    <title>Practise basic components of website</title>
  </head>
  <body>
    <style>
      .item {
        height: 40px;
        width: 80px;
        text-align: center;
        line-height: 40px;
        vertical-align: middle;
        border: 1px solid red;
        position: absolute;
      }
    </style>
    <div class="items">
      <div class="item">This</div>
      <div class="item">is</div>
      <div class="item">red</div>
      <div class="item">cow</div>
    </div>
    <script>
      const items = document.querySelectorAll(".item");
      let holder = {};
      items.forEach((item, index) => {
        item.style.left = index * 120 + "px";
        item.addEventListener("click", function (e) {
          holder.obj = item.cloneNode(true);
          holder.obj.startX = item.offsetLeft;
          holder.obj.startY = item.offsetTop;
          console.log(holder.obj.startX, holder.obj.startY);
          holder.obj.style.cursor = "move";

          holder.obj.moves = Math.floor(Math.random() * 25);
          holder.obj.int = setInterval(mover, 25);

          function mover() {
            if (holder.obj.moves <= 0) clearInterval(holder.obj.int);
            else {
              holder.obj.moves--;
              holder.obj.startX += 1;
              holder.obj.startY += 10;
              holder.obj.style.left = holder.obj.startX + "px";
              holder.obj.style.top = holder.obj.startY + "px";
            }
          }

          document.body.appendChild(holder.obj);
          dragger(holder.obj);
        });
      });
      function dragger(element) {
        let pos = {};
        element.onmousedown = function (e) {
          pos.x = e.clientX;
          pos.y = e.clientX;

          document.onmouseup = function () {
            document.onmouseup = null;
            document.onmousemove = null;
          };
          document.onmousemove = function (e) {
            pos.ux = pos.x - e.clientX;
            pos.uy = pos.y - e.clientY;

            pos.x = e.clientX;
            pos.y = e.clientY;

            element.style.left = element.offsetLeft - pos.ux + "px";
            element.style.top = element.offsetTop - pos.uy + "px";
          };
        };
      }
    </script>
  </body>
</html>
